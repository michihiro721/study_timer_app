<%= stylesheet_link_tag 'timers_new', media: 'all' %>

<!-- åŠé€æ˜ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’è¿½åŠ  -->
<div class="overlay"></div>

<div class="center-content">
  <h1 class="header-title">ğŸ€æ„Ÿè¬ã®å­¦ç¿’ã‚¿ã‚¤ãƒãƒ¼ğŸ€</h1>

  <!-- ã‚¹ã‚¿ãƒ³ãƒ—ãŒæº€ã‚¿ãƒ³ã«ãªã£ãŸã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¤ãƒ©ã‚¹ãƒˆã‚’è¡¨ç¤º -->
  <% if Timer.stamps >= 30 %>
    <div class="congratulations">
      <p>ğŸ‰ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ğŸ‰<br>æ„Ÿè¬ã®ã‚¹ã‚¿ãƒ³ãƒ—ãŒæº€ã‚¿ãƒ³ã«ãªã‚Šã¾ã—ãŸï¼</p>
      <%= image_tag 'cute_image.png', alt: 'å¯æ„›ã„ã‚¤ãƒ©ã‚¹ãƒˆ' %>
      <p>å¤§åˆ‡ãªäººã«æ„Ÿè¬ã®æ°—æŒã¡ã‚’ä¼ãˆã¾ã—ã‚‡ã†ï¼ï¼</p>
      <%= button_to "ğŸ”¥ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å­¦ç¿’å†é–‹ğŸ”¥", reset_total_duration_timers_path, method: :delete, id: 'reset-total-duration-button', class: 'styled-button' %>
    </div>
  <% else %>
    <%= form_with model: @timer, local: true, html: { class: 'start-form' } do |form| %>
      <%= form.submit "ğŸŒ±å­¦ç¿’é–‹å§‹ğŸŒ±", class: 'start-button', id: 'start-button' %>
    <% end %>
  <% end %>

  <% if @last_timer && @last_timer.end_time.present? %>
    <p class="large-text margin-top">ä»Šå›ã®å­¦ç¿’æ™‚é–“: <%= @last_timer.duration %></p>
  <% end %>

  <!-- ç‹¬ç«‹ã—ãŸç´¯è¨ˆå­¦ç¿’æ™‚é–“ã‚’è¡¨ç¤º -->
  <p class="large-text total-time">ç´¯è¨ˆå­¦ç¿’æ™‚é–“: <%= Time.at(@independent_total_duration || 0).utc.strftime("%Hæ™‚é–“%Måˆ†%Sç§’") %></p>

  <!-- ã‚¹ã‚¿ãƒ³ãƒ—ã®è¡¨ã‚’è¡¨ç¤º -->
  <div class="stamp-container">
    <p class="large-text">ç¾åœ¨ã®ã‚¹ã‚¿ãƒ³ãƒ—æ•°: <%= Timer.stamps %></p>
    <div class="hover-message">1ç§’ã®å­¦ç¿’ã”ã¨ã«1ã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—</div>
    <table style="background-color: white;">
      <% cells = (params[:cells] || 30).to_i %>
      <% rows = (cells / 10.0).ceil %>
      <% rows.times do |row| %>
        <tr>
          <% 10.times do |col| %>
            <% index = row * 10 + col %>
            <td>
              <% if index < cells %>
                <% if index < Timer.stamps %>
                  <span>â˜˜ï¸</span> <!-- ã‚¹ã‚¿ãƒ³ãƒ—ãŒæŠ¼ã•ã‚ŒãŸçŠ¶æ…‹ -->
                <% else %>
                  <span>â¬œï¸</span> <!-- ã‚¹ã‚¿ãƒ³ãƒ—ãŒæŠ¼ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ -->
                <% end %>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </table>
  </div>
</div>

<!-- å­¦ç¿’é–‹å§‹ãƒœã‚¿ãƒ³ã®å¤‰æ›´ã®å‡¦ç†ã‚’JavaScriptã§å®Ÿè¡Œ -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var startButton = document.getElementById('start-button');
    startButton.addEventListener('mouseover', function() {
      startButton.value = 'ğŸ”¥å­¦ç¿’é–‹å§‹ğŸ”¥';
    });
    startButton.addEventListener('mouseout', function() {
      startButton.value = 'ğŸŒ±å­¦ç¿’é–‹å§‹ğŸŒ±';
    });

    // ã‚¹ã‚¿ãƒ³ãƒ—è¡¨ã«ãƒ›ãƒãƒ¼æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    var stampContainer = document.querySelector('.stamp-container');
    var hoverMessage = document.querySelector('.hover-message');

    stampContainer.addEventListener('mouseover', function() {
      hoverMessage.style.display = 'block';
    });

    stampContainer.addEventListener('mouseout', function() {
      hoverMessage.style.display = 'none';
    });
  });
</script>

